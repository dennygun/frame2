<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>80 Tahun Kemerdekaan RI - AR Selfie Frame</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: #000;
  }
  #container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* Removed mirror effect */
    transform: none;
  }
  #drawCanvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
    pointer-events: none;
  }
  /* Red-white animated top border */
  .border-top {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background: linear-gradient(270deg, red, white, red);
    background-size: 400% 400%;
    animation: shine 8s linear infinite;
    z-index: 20;
  }
  @keyframes shine {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }
  /* Text overlay */
  .text-overlay {
    position: absolute;
    top: 50px;
    width: 100%;
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    color: white;
    text-shadow: 2px 2px 4px black;
    z-index: 20;
  }
</style>
</head>
<body>

<div id="container">
  <video id="video" autoplay playsinline></video>
  <canvas id="drawCanvas"></canvas>
  <div class="border-top"></div>
  <div class="text-overlay">80 Tahun Kemerdekaan Indonesia</div>
</div>

<script>
  const video = document.getElementById('video');
  const canvas = document.getElementById('drawCanvas');
  const ctx = canvas.getContext('2d');
  
  let drawing = false;
  let lastX, lastY;

  // Camera setup
  navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } })
    .then(stream => {
      video.srcObject = stream;
    })
    .catch(err => {
      console.error("Camera error:", err);
    });

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  // Drawing with touch
  canvas.addEventListener('touchstart', e => {
    e.preventDefault();
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    lastX = touch.clientX - rect.left;
    lastY = touch.clientY - rect.top;
    drawing = true;
  });

  canvas.addEventListener('touchmove', e => {
    e.preventDefault();
    if (!drawing) return;
    const touch = e.touches[0];
    const rect = canvas.getBoundingClientRect();
    const x = touch.clientX - rect.left;
    const y = touch.clientY - rect.top;
    ctx.strokeStyle = 'yellow';
    ctx.lineWidth = 4;
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
    ctx.lineTo(x, y);
    ctx.stroke();
    lastX = x;
    lastY = y;
  });

  canvas.addEventListener('touchend', e => {
    drawing = false;
  });
</script>

</body>
</html>
